## 12.5 操作记录

1. 更改 mongod.conf 设置 bind.ip = 0.0.0.0 ，允许本地进行连接

2. 使用apt-get install安装nginx php7.0,配置nginx的php

3. 使用apt-get install 安装mysql-server root密码crw981003

4. 修改connect.php中的数据库连接配置

5. 将数据库文件导入mysql中

6. nginx出现了 403 forbidden 错误，经排查是由于文件权限问题

7. 配置JAVA_HOME JRE_HOME CLASS 环境变量

8. 一开始用apt-get install elasticsearch安装 应该是版本有问题 无法正常使用 后面改用官方提供的安装方式解决

9. 用官方的安装方式安装了kibana

10. 修改elasticsearch和kibana的配置文件，使外网也可以访问

11. 使用npm安装mongo-es

12. 编写php脚本 为某个数据库底下的某个collection生成mongo-es配置文件 

    ```
    如果产生了认证问题，可以在mongodb的uri上加上用户名和密码 mongodb://admin:abc123?@localhost:27017           事实验证这玩意不好用
    ```

13. 不知道如何认证mongodb身份，只能先关闭mongodb权限了

    ```
    ps -ef | grep mongod
    kill -9
    mongod -f /etc/mongod.conf --fork
    ```

14. 服务器报could not find driver了 应该是php扩展的问题

15. 依次sudo apt-get install php7.0-pdo php7.0-curl php7.0-mysql 问题解决

16. 前端无法显示vietnam我做一下修改 修改失败 算了

17. 另外插一条

    ```json
    PUT /indonesia_antara/_settings
    { 
     "index.blocks.read_only_allow_delete": null 
    }
    ```

18. 搜索的时候服务器报500了 显示下报错信息

    ```php
    ini_set("display_errors","On");
    error_reporting(E_ALL);
    ```

    问题在于索引找不到 因为首字母大小写的问题 回头改一下php吧

