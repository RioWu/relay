# 2018.10

## 10.15

- 将河畔先部署在本地了，改了下数据库配置，具体位置在

  ```
  /config/config_global.php
  ```

- 突然想做的几个实验:

  - apache 配置CGI和fast CGI
  - nginx配置反向代理解决跨域问题

- 修改了网络配置以实现共享文件

  - [具体参考博客](https://blog.csdn.net/a2385623830/article/details/52512427)

  - 更改的配置
    - 网络设置 -> 更改高级共享设置 ->启用共享以便可以访问网络的用户可以读取和写入公用文件夹中的文件->关闭密码保护共享

## 10.16

刷了一遍《细说PHP》，发现一些之前没注意的东西

- 伪类型介绍
  - mixed:说明一个参数可以接受多种不同的(但并不必须是所有的)类型。例如gettype()可以接受所有的PHP类型，str_replace()可以接受字符串和数组。
  - number:说明一个参数可以是integer或者float。
  - callback:有些诸如call_user_function()或usort()的函数接受用户自定义的函数作为一个参数。

```php
<?php
error_reporting(E_ALL);
function increment(&$var)
{
    $var++;
}
$a = 0;
call_user_func('increment', $a);        //不会改变$a的值，因为传参的格式不对
echo $a."\n";
call_user_func_array('increment', array(&$a));//You can use this instead before PHP 5.3
echo $a."\n";
?>
函数的返回值是
0
1
```

```php
<?php
function cmp($a, $b)
{
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

$a = array(3, 2, 5, 6, 1);

usort($a, "cmp");

foreach ($a as $key => $value) {
    echo "$key: $value\n";
}
?>
函数的返回值是
0: 1
1: 2
2: 3
3: 5
4: 6
```

- 关于退出脚本
  - exit语句，die语句
  - exit()函数
  - die()函数：是exit()函数的别名，可以带有一个参数输出一个错误信息	
- 运算符
  - ?: 一个三元运算符，可以提供简单的逻辑判断。
    - e.g.:`$a<$b ? $c = 1:$c = 0;`
  - ``:反引号，效果与shell_exec()函数相同，会试图将输入作为操作系统命令执行，并返回结果。	
- 函数：
  - 引用参数的函数：`void function(array &$ary)`
  - 默认参数的函数：`mixed function(string name[,string value[,int expire]])`
    - `[]` 表示有默认值
  - 回调函数
    - 变量函数： `$function()`，一个字符串如果和某个函数同名， 此时如果在后面 + `()`，则它成为一个函数
  - `require()`  和 `include()` 是语言结构，可以加 `()`，也可以不加。
    - `require`会在程序运行前执行
    - `include`会在程序运行到这一行时执行

## 10.22

- 开始做leetcode上的题目了，但是没有php作为语言选项，考虑用java，边学边做吧
- 下午把es的php接口写了，没什么特殊的东西，其实原理就是用php去执行curl，用关联数组的形式去表示query语句，用composer下载后直接用ok。
- 晚上加了个小功能，foreach得到的userlist 添加一个按顺序来的整数，以防止用id作为唯一标识的时候可能出现乱序。

## 10.26

- 配置了一下php 的fast CGI，按照[参考博客](https://blog.csdn.net/u014691098/article/details/80159574)配置了一下，现在记录一下操作，免得到时候出问题没法处理：

  - [下载fast CGI模块](https://www.apachelounge.com/download/)

  - 把下载好的mod_fcgid.so文件复制到Apache的安装路径modules目录

  - 在apache的配置文件httpd.conf中添加如下段落：

    ```conf
    LoadModule   fcgid_module modules/mod_fcgid.so
    <IfModule fcgid_module>
        FcgidIOTimeout 60
        FcgidConnectTimeout 30
        FcgidMaxProcesses 8
        FcgidOutputBufferSize 64
        ProcessLifeTime 240
        FcgidMaxRequestsPerProcess 500
        FcgidMinProcessesPerClass 0
    
        Options ExecCGI
        AddHandler fcgid-script  .php 
        #你项目php安装目录
        FcgidWrapper "D:/CODE/wamp64/bin/php/php7.2.10/php-cgi.exe" .php
    </IfModule>
    ```


## 10.29

- 光贤问了个东西，刚好复习一下Mysql的操作

  - 创建表

    ```MYSQL
    CREATE TABLE stu(
    id INT AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    PRIMARY KEY(id));
    CREATE TABLE course(
    id INT,
    co_id INT);
    ```

  - 内连接（inner join):获取两个表中字段匹配关系的记录。

    ```mysql
    SELECT * from stu INNER JOIN course on stu.id = course.id;
    ```

  - 左连接（left join）:会通过on语句后面的条件从右边的表中取出符合条件的语句，如果没有符合条件的就返回NULL

  - 连接语句的条件语句执行顺序：先执行on后面的条件语句再执行where后面的条件语句

  - 如果想对左连接得到的数据进一步的过滤，可能会用到is null语句，用来判断某个字段的值是不是为null（不能直接写where id = null，这里会把null识别为字符串)

# 2018.11

## 11.16

今天在给eclipse装汉化包的时候遇到一个bug就类似于下面这种

```
An error occurred while collecting items to be installed session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=). No repository found containing: osgi.bundle,org.eclipse.emf,2.6.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.ant,2.7.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.codegen,2.8.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore,2.8.1.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ecore.ui,2.8.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.codegen.ui,2.6.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.common,2.8.0.v20120911-0500 No repository found containing: osgi.bundle,org.eclipse.emf.common.ui,2.7.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.converter,2.5.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.databinding,1.2.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.databinding.edit,1.2.0.v20120917-0436 No repository found containing: osgi.bundle,org.eclipse.emf.ecore,2.8.1.v20120911-0500 No 
```

解决方法是在选择install new software的时候不要选择  **Contact all update sites during install to find required software** 这个选项就ok

## 11.26

今天早上主要干了两件事：

- 在泽章的服务器上面配置优班答辩
  - git clone
  - 修改CI配置
    - index.php
    - default controller
    - database.config
- 修理自己的搬瓦工飞机

to-do list(下划线表示已经完成)：

1. <u>在自己的vps上手动配置ss-libev，听滔哥说这样比较稳定</u> 
2. 继续写爬虫

# 2019.1

## 1.10 星期四 据说是下雪了

今天是寒假在家的第一天，早上10点多11点起床，然后和家里人（爸爸、大爸、爷爷、大姑妈）在隆兴面食馆吃了顿饭，下午基本上没干什么，在家里闲着，看了两集 **超越吧!英雄** ，感觉不错，决定追了。

晚上抽空看了下git，学了一些之前没用过的东西

- git branch:查看当前的分支情况
- git checkout:切换当前所在分支，参数`-b`可以创建一个不存在的分支然后切换过去
- git pull = git fetch(只改变远程仓库对应的指针指向) + git merge
- git remote:查看当前关联的远程仓库，参数`-v`可以查看详细的远程仓库地址

晚上睡得贼晚，3点、4点了可能

## 1.11 星期五 没出门欸 好像挺冷的外面

今天是寒假在家的第二天，印象中没有出门过，早上10点钟起床，看了一场究极精彩的NBA比赛

- (10:00~13:00)马刺打雷霆
  - 阿德56分
  - 双加时
  - 威少助攻数新高
- (14:00~17:00)无名之辈
  - 讲述了一个保安、一对劫匪和一个残疾毒舌女之间的故事
  - 总的来说是部很好的电影，几个人物构造的都很不错，尤其是任素汐的表演，可以说的上是令人印象深刻了
  - 整部剧大家都用四川话，感觉还有点亲切呢
- (17:00~19:00)看了ElasticSearch的相关内容
  - 索引原理
    - B树、B+树
    - 为什么比B树和B+树快
  - 分布式存储原理
  - 读写原理
- (19:00~21:00)很早就睡了，因为实在太困了，上一天可能就睡了5个多小时

## 1.12 星期六 没出门 天气不清楚

今天是寒假在家的第三天，今天mac就要到了，很兴奋。

- [ ] 预习明天java课要学的东西(虽然感觉拉的有点多，可能补不完)
- [ ] 测试小程序的代码，需要解决以下几个问题：
  - 验证码问题
  - ip访问次数过多被封的问题
- [ ] 东南亚新闻搜索需求改动的问题
- [ ] Laravel学习一下吧（或者继续用tp）

现在是晚上9点钟 之前的任务都没有完成 

- （12:00）拿到了mac，很激动，看了下没什么问题，给家铖转了12230，交了白条和花呗，买了个mac的收纳袋，还剩2900多
- (12:00~13:00)吃了个中饭，吃的是馒头和鸡蛋、砂锅，很好吃
- (13:00~16:00)差不多这个时间吧，和栋玩了几把lol
- (16:00~19:00)看我是歌手，今天感觉身体很不舒服，心情也不好，吼了妈妈几句，做的很不好
- (19:00~21:00)给mac上装了一些软件，在电视上看直播
- (21:00~22:00)老爸老妈回来了 送给老妈一个蓝牙耳机
- (22:44~1:13)和老哥玩游戏
- (1:13~2:00)玩手机 睡觉

## 1.13 星期天  没有出门 天气不清楚

今天是寒假在家的第四天，mac很好用，很舒服

- [ ] 结束核心技术卷一的继承部分
- [ ] 结束核心技术卷一的接口部分
- [ ] 结束核心技术卷一的并发部分
- [ ] 东南亚新闻搜索需求改动
- (9:00~10:00)早上醒来 发现有点迟了 就没回老家 吃了个早饭 吃的是微波炉热的面包和在锅里热的牛奶
- (10:00~12:00)java网课 讲spring ioc、bean周期、balabala
- (12:00~2:00)给自己煮了饺子吃，看了会直播
- (2:00~6:00)学习java，改了新闻搜索的一个bug(在没有数据的情况返回数据会导致前端显示错误)
- (6:00~8:00)吃饭，看电视
- (8:00~9:00)看电视
- (9:00~1:00)和老哥、栋玩lol
- (1:00~4:00)玩手机

## 1.14 星期一  今天出门了 陪老爸出去散步了

今天是寒假在家的第五天，乖乖，时间过得好快，生活作息必须要改变，像之前那种很晚才睡的情况不能再发生了

- (11:00~12:00)起床，看直播

- (12:00~13:00)看直播

- (13:00~13:30)吃饭：速冻饺子

- (13:30~17:30)看动漫：《关于我转生变成史莱姆这档事》

- (17:30~18:30)陪老爸下去散步，搬东西(老爸学校给发的年货)

- (18:30~ 19:00)吃饭

- (19:00~20:30)今天解决的主要问题是，那个新闻搜索网站，如果在刚开始的时候进去，是可以不选择网站直接进行搜索的，但是也没有报错，后面发现问题了：

  - php报warning是不会影响程序继续执行的，所以后面的程序可以继续运行而不会直接退出

  - foreach一个不存在的数组时会报warning，这个时候整个foreach的语句块都不会被执行，整个程序会直接跳转到foreach语句块之后的部分

  - 剩下的就要具体问题具体分析了，上代码

    - searchApi的数据可以正常显示，因为：

      ```php
      global $index_string;
      foreach ($json_array['index'] as $value) {
          $value = $json_array['language'] . '_' . $value;
          $index_string .= ',' . $value;
      }
      $index_string = ltrim($index_string, ',');
      $params = [
          'index' => $index_string,
          'type' => 'news_data',
          'body' => [......];
      ```

      在这段代码里，首先，`$index_string` 为空(只是被声明了出来，但没有被赋值)，按照结果论，下面的那个搜索的时候 `$index_string` 为空应该会让elasticsearch查询所有索引，因此不会影响最终结果

    - chartApi的数据count_result没有问题，道理和searchApi是一样的，但time_result就有问题了

      ```php
      $time_result = [];
      foreach ($json_array['index'] as $value) {
          $value = $json_array['language'] . '_' . $value;
          $time_result[$i] = $value;
          $index_string .= ',' . $value;      //构造表示搜索的索引的字符串
          $i++;
      }
      $index_string = ltrim($index_string, ',');         //删除开头的逗号
      $json_array['index_string'] = $index_string;
      
      
      foreach ($time_result as $key => $value) {
          $time_return = time_aggs($client, $json_array, $value);
          if ($time_return != false) {
              $time_result[$value] = $time_return;        //相当于把$time_result中的value当作键名再创建几个键值对，然后删掉之前无用的key
          }
          unset($time_result[$key]);
      }
      ```

      两个foreach一样的问题，都是为空，会报warning，但是继续运行，所以最后结果`time_result`还是空的

  - (20:30~1:00) 和栋、老哥玩英雄联盟

  - (1:00~4:00)玩手机

## 1.15 星期二 出门了 去了趟爷爷家

- (12:00~13:00)起床，马刺输球了，难受。吃了个早饭，吃的是老妈做的排骨面，味道还不错
- (13:00~15:00)时间可能记得不是很准确，忘记做什么了，应该是看动漫和直播
- (15:00~20:30)
  - 看了会java，抽象函数那里
  - 取快递，拿了电脑收纳袋，外形还可以
  - 去了趟爷爷家，买了唱戏机，爷爷很高兴
  - 还去了老姑的医院，但我没去，早知道就去了，在车里等了好长时间，难受
- (20:30~00:00)
  - 看核心卷一，看的部分是object这个类那里
  - 和老哥玩大乱斗，自己玩了两把单双排
- (00:00~01:30)看了会直播，准备睡觉

## 1.16 星期三 出门了 理了个头

- (11:00~13:30)起床，吃了个饭，自己煮的方便面，不是很好吃

- (13:30~16:00)核心卷一

  - hashCode、equals方法重写，String的hashCode方法重写过，跟内容有关，Object的hashCode方法返回的是对象存放的地址

  - arrayList，数组列表，可以通过get、add、set、remove方法对数组列表进行修改

  - 多个参数的方法:  `(String… args)`可以传入任意数量的参数，当作`new String[] {args1,arg2,arg3...}`处理

    ```java
    public static void main(String... args){}
    ```

    

  - 自动装箱、拆箱，每种基本类型都有对应的类包装器，比如int => Interger

    - 自动装箱举例

      ```java
      	ArrayList<Integer> list = new ArrayList<>();
      	list.add(3);
      //这个时候会自动装箱，等于
      	list.add(Integer.valueOf(3));
      ```

    - 自动拆箱举例

      ```java
      	Integer i = Integer.valuseOf(3);
      	i = i++;
      //自动拆箱,等于
      	i = i.intValue(); //返回一个int值
      	i = i++;
      ```

## 1.17 星期四 今天坐飞机去北京

- (12:00~1:00)起床，吃早饭，蒸饺和饺子
- (1:00~5:00)去机场，飞机还延误了，烦，最后还是到了，栋来接的我
- (5:00~7:00)栋请我和老哥吃的烤鸭，味道还是相当ok的
- ***(7:00~11:30)去ktv唱歌，老哥还是很强的，非常给力***
- (11:30~1:30)在栋的宿舍收拾东西，睡觉了

## 1.18 星期五 今天一天在外面 桐神领着

- (8:00~8:20)起床，收拾一下

- (8:20~9:00)见了桐神，吃的羊肉汤

  - 羊肉汤：16

- (9:00~11:00)坐了一堆地铁，去天安门和故宫玩了下

  - 故宫门票：20块

  (11:00~14:49)去中关村软件园，参观了下，在星巴克呆了一会

  - 咖啡：35
  - 滴滴：5

- (14:49~16:00)和桐神吃老北京杂酱面，面还不错，酱牛肉也忒贵了

  - 饭钱：41

- (16:00~17:00)去火车站接泽章和光辉

- (17:00~18:30)找到了一家民宿，总体来说还不错，很便宜，床也不错

- (18:30~21:30)和老大、光辉、泽章吃涮羊肉

  - 滴滴：15
  - 饭钱：122.5

- (21:30~22:30)去望京玩了，参观了一下望京SOHO，老大请了杯奶茶，自己买了汉堡王，见到了加班归来的家伟老师

- (22:30~1:30)和家伟老师、老大、泽章、光辉一起逛街，主要是798那边，看到了老工业区，很有意思

- (1:30~2:30)我佛了，车也太难打了，打不到车，最后打的首汽约车，贵的一批

  - 车钱：30

- (2:30~3:30)洗澡：睡觉，今天累的不谈

  - 今日地铁票：20
  - 房费：270
  - 总花费：574

## 1.19 星期六 在外面玩了一天

- (10:30)起床
- (10:30~13:30)被黄老板安排，三点一线，长春桥、五道口、立水桥，坐地铁就完事了
- (13:30~16:30)烤鸭店等的时间也太长了，等了两个小时
  - 烤鸭：115
- (16:30~22:00)去三里屯吃饭(我佛了，不知道怎么想的)，等了巨长时间，老大请吃了顿川菜，很好吃
- (22:00~03:30)回家，玩了会王者荣耀，我峻和光辉的呼噜不谈，4点多睡的
  - 今日地铁票：18
  - 买正新鸡排烧烤：50
  - 今日总花费：183

## 1.20 星期日 在外面又玩了一天 去天津

- (10:30~12:30)去吃了豆汁，难喝的一，不谈了，再也不喝了，家伟老师请客
- (12:30~16:30)去滑雪了，摔成皮卡丘
  - 滑雪：120
- (16:30~19:30)家伟老师请吃烧烤，好吃的一
- (19:30~20:30)去天津，接到孙老师，请吃了顿汉堡王
  - 高铁票：57
  - 买回去的票（我和孙毅）：700
  - 汉堡王：100
- (20:30)住到酒店里
  - 今日地铁票：14
  - 今日总花费：1000

## 1.21 星期一 在天津的如家里 和孙老师一起

- (10:30)起床

- (10:30~13:00)赖床

- (13:00~14:00)给mac配置环境

  - brew 安装php7.3、nginx、mysql

    - 在zshrc里添加环境变量，使用自己安装的php而不是自带的(具体内容可以参见桌面上的php_install文件)

    - 关闭apache，使用apachectl，使用这条命令可以查看端口占用

      ```
      sudo lsof -i -P | grep -i "listen"
      ```

    - 安装php-fpm扩展，使用brew insatll php --with-xxx 这种形式安装

    - 安装mysql，使用mysql -uroot的形式进入

    - brew services list可以查看服务状态

- (14:00~17:00)玩手机
- (17:00~19:00)休息
- (19:00~21:00)孙老师回来了 玩了会lol
- (21:00~03:00)看小说

## 1.22 星期二 回家了

- (8:30)起床
- (8:30~10:30)早饭，煎饼果子，上火车
- (10:30~17:30)高铁上
- (17:30~21:30)吃了顿大盘鸡，回家了
- (21:30)感冒了很难受，睡觉了

## 1.23 星期三  感冒了 难受了一天

- (11:30)起床
- (11:30~01:30) 难受了一天 看了会Java 反射那部分

## 1.24 星期四 陪舅舅去医院

- 今天去医院了 诊断出颈椎和胸椎有点小问题

## 1.25 星期五 来医院

- 今天来医院按摩 化验 输液

- `mysql_secure_installation` 可以用来修改mysqlroot密码
- my.cnf 位置 `/usr/local/etc/my.cnf`
- Mysql 8.0以上更换用户密码存储方式 导致第三方软件不能正常使用 
  - [解决方案](https://blog.csdn.net/qq_28347599/article/details/80331484)

# 2019.2

## 2.18 突然有的一些感慨

  刚在收拾东西的时候，突然看到初中的毕业纪念册，里面有好多同学写的自己的资料和当时一些想跟我说的话。好像我初中的外号叫十三（😂其实我也不记得）？ 好多人在里面写说我给他们的印象是一个爱装逼、很单纯、很诚实的一个小胖子，其实初中还有好几个关系很不错的女同学，但到了高中好像就没了。现在想想，可能是因为整个高中我都没怎么适应好自己已经不是顶尖优秀的那一群人这种定位吧，思想还停留在之前的阶段，或者说在换了一个环境之后，自己很难（或者潜意识不愿意？）去在这个新环境中重新寻找自己的定位，寻找在这个新环境中自己的新的人生目标和重点。这一点也是可以表现在与别人的交流或者结实新朋友上的。回想高一，已经很难回忆起当时的全貌，只是隐隐记得当时好像适应不了这种新的高中环境，大家都很优秀，不像初中，自己唯一觉得很厉害的就是薛傥，而后面也证实了他确实是属于那类很优秀的人中的。这一点可能表现在与人交际上就是有些怯懦、有些不过果敢吧。

​	看到这些以前的东西总会有一种错觉，好像自己已经活了很长时间，但有一部分记忆被生生的去除掉了。这种感觉很奇怪，刚刚看纪念册的时候看到有一个叫李华岩的人给我写了很长的一段话，但是我死活也想不起来这个人到底是谁。

​	将看问题的角度扩大到整个人生，每个阶段都会有每个阶段陪伴你的人，小学是赵新宇、李新峰、王琨，初中是薛傥（不知道，对这个人的感情很复杂。。。不知道我们算不算朋友，很奇怪的一种感觉）、唐泽鑫，朱鸿飞、卢克成、杨皓威，高中是孙毅、荆栋、马志鹏、庞博、孙铭辰、郭坚峰、张泽萱、张伟鹏、赵国梁（这些人都在某个时间段在我心中是我最好的朋友，有的现在还是，有的已经不联系了）。大学的话，还没结束，不好评论，有点可惜的是自己可能并没有用最好的方式去对待周围的人，包括对待自己。但人生没有重来的机会，我现在就在懊悔、反思自己的一生。这种反思可能会带来涅槃，也可能什么都不带来，不过现在也无所谓了，处境还会再糟糕吗？

## 2.27	早上上课，下午工作室

本来好久都没有写日记了，今天遇到一个贼神奇的bug，忍不住记录一下，真的佛了。

首先，bug长这样：

```
PHP 7.3 - preg_replace(): Compilation failed: invalid range in character class at offset 4
```

是因为这行代码：

```PHP
if (!preg_match("/^[\w-:]+$/", $tag)){}
```

修改方式是将正则表达式改为：

```php
if (!preg_match("/^[\w\-:]+$/", $tag))
```

也就是在`-`前面加一个`\`，至于原因，出现在php7.3官方文档的一个不起眼的小角落里：

![image-20190227203034439](/Users/riochen/Library/Application Support/typora-user-images/image-20190227203034439.png)

7.3php将正则表达式扩展升级到了PCRE2，这带来了更为严格的语法检查，就导致这个问题

# 2019.3

## 3.2 星期六 记录下下一步工作

- [ ] 解决如果数据库中的cookie_string过期，该如何响应请求个人信息这个问题
- [ ] 通过优化代码（尤其是get和post部分的，有的步骤不需要请求cookie就可以不用保存）

## 3.8 星期五 记录下作业

- [ ] `系统与数据恢复技术`：关于M.2接口写一篇小作文，字数400字
- [ ] `计算机操作系统`:课件一后的作业要写，下周四交，每讲后面的作业都要写

## 3.12 星期二 记录下项目困难和一些想法

- 目前遇到的几个问题以及解决方法：
  - 在进行`curl`爬虫时，因为学校的认证系统会产生302，而如果设置`curl`属性为自动跳转，也就是`FOLLOWLOCATION`为`TRUE`的话，php会自动跳转过去，但跳转过去的请求不会携带任何Cookie，真是情况应该是，每次请求都是存储得到的cookie，并且再跳转至302页面时都会携带之前得到的cookie，而php的curl不带有这种功能。我必须强烈吐槽这一点，用php做爬虫真的太难用了。解决方法有两种：
    - 使用`curl`自带的`CURLOPT_COOKIEJAR`属性，可以直接获得Cookie，但是必须要**存在文件里**（吐槽：强行增加I/O工作量），而且不能`append`在同一个文件里，只能覆盖原有的文件，所以使用时，要使用`fopen`打开，然后读取cookie，保存在变量里，再执行curl，再把下次得到的cookie放在之前的这个变量里，再执行curl，完了一直这样循环，直到不再302。
      - 优点：获取cookie使用curl自带的属性，会方便一些
      - 缺点：增加I/O，而且使用`fopen`时，对于Netscape类型的文件，还要做处理才能得到符合格式的字符串
    - 自己去获得cookie，使用正则
      - 优点：不用I/O
      - 缺点：要使用很多次正则
    - 结论：第二种较好一点，但感觉两种方法都很差，php对于cookie的处理太不灵活了。

## 3.13 星期三 记录下项目想法

1. 使用redis存储cookie（cookie分为两个，一个是uestc_cookie，一个是eams_cookie

2. 访问网页时判断是不是302，如果是，则通过以下代码实现自动跳转

   ```php
   $return = get($url, $cookieString);
   while ($return["status"] == "302")
   {
       $url = $return["location"];
       $cookieString = $cookieString . ";" . $return["cookie_string"];
       $return = get($url, $cookieString);
   }
   ```


## 3.17 星期一 记录下关于项目其他模块的想法

### 班车

1. 存储所有的班车信息在数据库里

   ```
   校车起发点		start		varchar(32)
   校车终止点		end 		varchar(32)
   校车途径站		via			varchar(128)		//可以用json_encode存储一个数组在数据库里
   是否是周末		isWeekend   int(1)				//班车只有两种，周一到周五和周六周日
   ```

2. 提供两个功能：

   - 班车查询————提供始发点、日期，查询可用的班车
   - 提供所有班车的信息————直接从数据库里全部取出，还是跳转到成电后勤服务的页面

3. 目前遇到的问题：

   - 因为可能会遇到节假日或者特殊情况班车出现调动的情况，所以要提供一个班车管理的模块
   - 这个班车管理的模块肯定是需要人去维护的
   - 班车管理的模块如何操作
     - 直接修改数据库
     - 设置某个班车不能用，然后把这个信息传递给前端，前端会根据这个信息来判断某一列班车无法使用

## 3.27 星期三 

### 记录下之前看到的var、let、const的区别

- var声明的变量，其作用域为该语句所在的函数内，且存在**变量提升**的现象
- let声明的变量，其作用域为该语句所在的代码块内**（块级作用域）**，不存在变量提升的现象
- const声明的变量，在后面的代码中不能再修改该常量的值

### 今天主要看了下js的函数部分，发现js的函数有以下几个特点

- js中的函数实际上是对象，每个函数都是Function类型的实例，而且都与其他引用类型一样具有属性和方法。由于函数是对象，因此函数名实际上也是一个指向函数对象的指针，不会与某个函数绑定。

- 函数可以使用以下方式进行定义：

  - 函数声明

    ```js
    function sum(num1,num2){
      return num1 + num2;
    }
    ```

  - 函数表达式定义

    ```js
    var sum = function(num1,num2){
      return num1 + num2;
    }
    ```

  - 使用Function构造函数**（不推荐）**

    ```js
    var sum = new Function("num1", "num2", "return num1 + num2");
    ```

    这种定义函数的方式会导致解析两次代码（第一次是解析常规ECMAScript代码，第二次是解析传入构造函数中的字符串），从而影响性能。

- js里的函数是没有重载的，因为在创建第二个重名函数时，实际上就覆盖了引用第一个函数的变量

  ```js
  var addSomeNumber = function (num){
  		return num + 100;
  }
  addSomeNumber = function (num){
    	return num + 200;
  }
  var result = addSomeNumber(100);
  ```

- 函数声明存在名为**函数声明提升**的过程，而函数表达式则没有。

### 随便写写 于凌晨1:20

感觉现在的状态好像太轻松了，之前的状态是太过焦虑，太过纠结，导致什么都做不了。现在的情况是太过放松，太过佛系，导致什么都不想做？那这样下去岂不是会出大问题😂，目前想到的解决方案：

- 每天，每周给自己设置一个目标
- 严格按照生活作息的规划去做

## 3.28 星期四

### 每日目标

- [x] 牛客网算法题往后做一道～两道(算半道吧，看了下丑数那道题，但是没做出来)
- [x] 写好博士生学长的面试题
  - [x] 数据库和服务器部分的题目
  - [x] 回去照着书写一下泛型和桥接那个部分
- [x] 班车数据库导入
- [ ] java基础继续复习
  - [x] t2_basic_java.Topic4
  - [ ] t3_concurrent_java.Topic3
- [x] 打篮球

### JAVA基础复习

#### t2_basic_java.Topic4（集合类）

整个集合类的体系可以分为**Iterator**和**Map**两个接口

Iterator的子接口是**Collection**

Iterator中只是定义了三个方法：`Iterator()` `forEach(Consumer action)` `spliterator()`

所以，整个集合框架的体系可以看作两个大部分：

- Collection的结构图：在这个体系里，都是用某种数据结构来存储元素，比如链表、队列、栈等

  - ![Collection结构图](/Users/riochen/Downloads/it知识学习/电子书/Collection结构图.png)

  - Set代表无序、不可重复的集合：

  - List代表有序、重复的集合：

    - ArrayList、LinkedList和数组的区别：**可以动态扩容**
    - ArrayList、LinkedList的区别：ArrayList底层使用 **数组 **实现，具有更高的存取效率；LinkedList的底层使用 **链表** 实现，拥有更高的增删效率

    

- Map的结构图：在这个体系里，存储的数据都是<Key,Value>这种结构的键值对

  - ![Map结构图](/Users/riochen/Downloads/it知识学习/电子书/Map结构图.png)

  - HashMap：

    - 散列算法

      - 依靠Key对象的hashCode方法

      - 高低位异或，增大随机性（扰动），避免Key对象散列函数的缺陷

      - 定位时&取模，缩小范围

      - 使用位运算，可以提高性能，主要原因是位运算直接对内存数据进行操作，不需要转换成十进制，因此处理速度非常快。原理如下：

        ```
        X % 2^n = X & (2^n – 1)
        2^n表示2的n次方，也就是说，一个数对2^n取模 == 一个数和(2^n – 1)做按位与运算 。
        假设n为3，则2^3 = 8，表示成2进制就是1000。2^3 = 7 ，即0111。
        此时X & (2^3 – 1) 就相当于取X的2进制的最后三位数。
        从2进制角度来看，X / 8相当于 X >> 3，即把X右移3位，此时得到了X / 8的商，而被移掉的部分(后三位)，则是X % 8，也就是余数。
        ```

      - HashMap的长度必须是2^n，因为：

        ```
        32 11111
        31 11110
         3 10
        01、11用不上，因为取模运算的时候，需要进行按位与操作，而如果最后一位是0，那么不管得到的HashCode的值是多少，永远不会得到尾数为1的值，也就是整个hash表中这两个位置永远不会存储元素，这显然是不行的。
        ```


## 3.30 星期六

#### 周末目标：

- [x] 顺利结束面试
- [x] 班车模块开发

- 记录个问题：PHP取出的mysql数据默认都会转换为string,在mysql里用json格式存储的数据，取出来之后会被变成string类型，这会导致后续的数据处理出现问题。[ThinkPHP的解决方法](https://www.kancloud.cn/manual/thinkphp5_1/354051)

- [ ] java基础复习
  - [ ] t3_concurrent_java.Topic3
- [ ] 牛客网刷题一道
- [ ] 病毒ppt看一章并总结
- [x] 数据恢复ppt看一章并总结
  - 第一章 概论：
    - 安全机制的组合
  - 第二张 磁盘：
    - 磁盘是如何读取数据的
    - 磁盘的几个重要概念：磁头、磁道、柱面、扇区
    - 磁盘总容量的计算
    - 系统是如何启动的
- [x] 操作系统做作业
- [x] 马原小组展示准备

### 4.1 星期一

#### 本周目标：

- [ ] 写一篇关于springIOC原理的博客
- [ ] 写一篇关于java并发的博客
- [ ] 结束小程序的用户和学生认证部分
  - [ ] 微信公众平台 后端是如何和前端交互实现微信用户身份认证的
  - [x] 关于教务系统认证，有两种选择：
    - 前端实现js验证，但是有一个key需要爬取页面才能获得，桐神那边前端因为有微信开发的限制，所以可能不能成功的请求，两种选择：
  - 把这一部分直接放在后端，做成node服务，作为后端的一部分
  - 我写一个接口，用来返还给桐神一个key，桐神把加密后的密码发给我
- [ ] 了解Kubernetes和Quakus，可以的话写一篇博客
- [ ] 剑指offer刷10道：
  - ![image-20190401140215810](/Users/riochen/Library/Application Support/typora-user-images/image-20190401140215810.png)

#### 本日目标

- [x] 操作系统作业
- [x] 数据恢复实验

### 4.2  星期二

- [x] 数据恢复期中考试
  - 当一个文件被删除之后，**首簇号变为00**，目录项第一个字节变为E5。
- [x] 算法题：从上到下打印二叉树
- [x] 算法题：栈的压入弹出队列

### 4.3  星期三

- [x] 看了20集《倚天屠龙记》

### 4.4  星期四

- [x] 研究了一下php对于文件上传的处理

  ```php
  <?php
  $imgname = $_FILES['myfile']['name'];
  $tmpname = $_FILES['myfile']['tmp_name'];
  $filepath = './photo/';
  if (move_uploaded_file($tmpname, $filepath . $imgname)) {
  echo "上传成功";
  } else {
  echo "上传失败";
  }
  ?>
  ```

  - 通过`$_FILES`超全局变量,具体见[手册](https://www.php.net/manual/zh/reserved.variables.files.php)

  - 处理文件上传限制的问题：

    - `php.ini`中添加`post_max_size = 20M`和`upload_max_filesize = 20M`
    - `nginx.ini`中添加`    client_max_body_size 20m;`

  - 处理文件权限问题：

    - 文件存放的位置，即示例中的`photo`目录，php-fpm进程必须拥有对该目录的读写权限，即775。

  - 多文件上传处理：

    - 遍历`$_FILES`即可

  - 如果当前目录不存在

    ```php
    function mkFolder($path)
    {
    if(!is_readable($path))
    {
        mkdir($path,0700);
    }
    }
    ```


## 4.5 星期五

- 早上去大熊猫基地看大熊猫

  - ![97D276E482FE04BB12F40D8278D28F5F](/Users/riochen/Library/Containers/com.tencent.qq/Data/Library/Caches/Images/97D276E482FE04BB12F40D8278D28F5F.jpg)

  - # ![91E276C862D6F79BC1E69CA566019E38](/Users/riochen/Library/Containers/com.tencent.qq/Data/Library/Caches/Images/91E276C862D6F79BC1E69CA566019E38.jpg)

- 下午和邓老板打lol

## 4.6 星期六 

- 好好睡了一觉 12点才醒
- 下午陪黄老板做头发，吃烧烤
- 晚上看lpl

## 4.7 星期日

- 终于解决了文件上传的部分

  - 前端部分：

    - html:

      ```html
          <div>
              image:<input id="image" multiple type="file" /><br>
              <button id="submit">提交</button>
          </div>
      ```

    - Js:

      ```js
      var btn = document.getElementById('submit');
      btn.onclick = () => {
          var fd = new FormData;
          var el = document.getElementById("image");
          var files = el.files;
          for (var i = 0; i < files.length; i++) {
          fd.append('files[]', files[i]);
      }
      $.ajax({
          url: "http://localhost:8080/app_be/public/index.php/lost/lost/postInfo",
        	type: "post",
        	data: fd,
        	contentType:false,
        	processData:false,
        	success: data => {
          		console.log(data);
        	},
        	error: err => {
          		console.log(err);
        	}
      })
      ```

    - php(ThinkPHP):

      ```php
      // 获取表单上传文件
      $files = request()->file('files');
      var_dump($files);
      foreach ($files as $file) {
          // 移动到框架应用根目录/uploads/ 目录下
          $info = $file->move('../uploads');
          if ($info) { } else {
              // 上传失败获取错误信息
              echo $file->getError();
          }
      }
      ```

## 4.8 星期一

- 论坛部分数据库设计
  - 方案一：在每条存储帖子的数据里添加一个用于表示点赞用户的字段，可以通过json形式存储多个点赞用户
  - 方案二：另外新建一个存储点赞信息的表，用来记录用户的每一条点赞信息，内容包括`用户ID`、`帖子ID`、`点赞是否有效(1/0)`
- 优化：
  - 考虑到点赞操作过于频繁，如果一直使用数据库操作持久化数据容易造成过于频繁的I/O操作，可以考虑将点赞的信息先存储在内存里（比如redis），然后执行一个定时任务定期的把数据写入数据库中。

## 4.9 星期二

- 把预约系统的后台写完了
- 明天要解决elasticsearch和mongodb的同步问题

# 2020年 日记

## 2.27 星期四

- 早上8点10分起，到现在10点15，如果把玩手机的时间都用来工作或者健身，会怎么样呢？
- 看了一个小时老友记
- 看了半个小时英国留学水不水
- 又看了一集老友记，刷了会b站
- 看了一小时b站 焦虑症相关 现在1点
- 下午吃饭（蛋炒面），两点左右，睡觉，起来玩手机到六点
- 突然有个感悟：当初只要去面试，去努力，就会有好的offer，当时没去做，现在反而面临更大的挑战。

## 3.6 星期五

在看`魏一驹：我取了bitman这个名字`这篇文章时，有一段话让我留意了一下

![image-20200306183536770](/Users/riochen/Library/Application Support/typora-user-images/image-20200306183536770.png)

这样的人值得尊敬和崇拜

![image-20200309193110973](/Users/riochen/Library/Application Support/typora-user-images/image-20200309193110973.png)

## 3.9 星期一

- 今天做了飞鱼和招行的笔试题，不算难，都很基础。

## 5.29 

https://lug.ustc.edu.cn/wiki/mirrors/help/brew.git

